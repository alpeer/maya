sudo: false
language: node_js
matrix:
  fast_finish: true
  include:
    - node_js: "0.10"
      env: TASK=test-node
    - node_js: "0.12"
      env: TASK=test-node
    - node_js: "iojs"
      env: TASK=test-node
    - node_js: "4"
      env: TASK=test-node
    - node_js: "4"
      env: TASK=test-browser
env:
  global:
    - secure: HcD8q37ctrE9U00GmDUssSzaxm6ruzhy7YLy6l/pMMZ1d7LYIW+8ChjTOrUic7DF0ND7JkiXuq3es9J/M69vl5/UA0Pbh8jU3OToI/4IwMcaSm7d+Eci6tBKzZbSdcgoRSheUzxR6ckk10IUpeWfzm6VadKKBBYIUIN+64ook/k=
    - secure: deuabwvWH2tBxQmy1BOyn/p8VY4MNAU9SmCeGIBk0XOAYcWE5tg6fw4tw6d8vfTOdCtrK29TEMPr11SVAbKcHJHX6Dqv112zfJ/oty/R2k4krsHOmZKFNx0qTvyx7UPezcTyQRrQBsMZOMJk1hJXIQmIcMWU9JpCAblnlZbJ5d0=
script:
  - "npm run ${TASK}"
after_script:
  - 'if [ "${TASK}" == "test-node" ]; then npm i coveralls@2 && cat coverage/lcov.info | coveralls; fi'
notifications:
  irc:
    channels:
      - "irc.freenode.org#unshift"
    on_success: change
    on_failure: change
